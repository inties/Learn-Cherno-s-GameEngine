#### 天空盒

关键技术以下三点：
1.构建一个包围摄像机的[-1,1]^3的立方体（天空盒本体）

2.使用立方体上光栅化片元的方向向量采样立方体贴图

3.立方体的NDC空间的Z值始终为1，让深度测试正确处理场景物体对天空盒的遮挡



如何构建一个包围摄像机的[-1,1]^3的立方体（天空盒本体）？

* 定义一个[-1,1]^3的立方体模型
* 通过特殊的view matrix将其变换到观察空间

view matrix要移除平移变换，只保留旋转

```
glm::mat4 view = glm::mat4(glm::mat3(camera.GetViewMatrix()));
```





如何使用立方体上光栅化片元的方向向量采样立方体贴图？

```
in vec3 textureDir; // 代表3D纹理坐标的方向向量，不用归一化
uniform samplerCube cubemap; // 立方体贴图的纹理采样器

void main()
{             
    FragColor = texture(cubemap, textureDir);
}
```





立方体的NDC空间的Z值始终为1，让深度测试正确处理场景物体对天空盒的遮挡？

```
gl_Position = pos.xyww;
```

